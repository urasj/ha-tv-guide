<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
<title>TV Guide</title>
<style>
:root{
  --bg:#0d0d1a;--surface:#12122a;--card:#1a1a35;--border:rgba(255,255,255,.1);
  --accent:#e5173f;--accent2:#7b2fff;--text:#e8e8f0;--muted:#7070a0;
  --success:#22c55e;--warn:#f59e0b;--radius:14px;
}
*{box-sizing:border-box;margin:0;padding:0;}
body{background:var(--bg);color:var(--text);font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',sans-serif;min-height:100vh;overflow-x:hidden;}

/* â”€â”€ Layout â”€â”€ */
#app{display:flex;flex-direction:column;height:100vh;}
.topbar{display:flex;align-items:center;gap:12px;padding:14px 20px;background:var(--surface);border-bottom:1px solid var(--border);flex-shrink:0;}
.topbar h1{font-size:18px;font-weight:700;flex:1;background:linear-gradient(135deg,#fff 40%,var(--accent));-webkit-background-clip:text;-webkit-text-fill-color:transparent;}
.content{display:flex;flex:1;overflow:hidden;}
.sidebar{width:260px;border-right:1px solid var(--border);overflow-y:auto;flex-shrink:0;background:var(--surface);}
.main{flex:1;overflow-y:auto;padding:20px;}

/* â”€â”€ Search â”€â”€ */
.search-wrap{padding:12px;position:sticky;top:0;background:var(--surface);z-index:10;border-bottom:1px solid var(--border);}
.search-wrap input{width:100%;background:rgba(255,255,255,.06);border:1px solid var(--border);border-radius:10px;padding:8px 12px;color:var(--text);font-size:14px;outline:none;}
.search-wrap input:focus{border-color:var(--accent);}

/* â”€â”€ Show list â”€â”€ */
.show-item{display:flex;align-items:center;gap:10px;padding:10px 14px;cursor:pointer;border-bottom:1px solid rgba(255,255,255,.04);transition:background .15s;}
.show-item:hover{background:rgba(255,255,255,.05);}
.show-item.active{background:rgba(229,23,63,.15);border-left:3px solid var(--accent);}
.show-poster-sm{width:36px;height:54px;object-fit:cover;border-radius:6px;background:var(--card);flex-shrink:0;}
.show-info-sm{min-width:0;}
.show-title-sm{font-size:13px;font-weight:600;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;}
.show-meta-sm{font-size:11px;color:var(--muted);margin-top:2px;}
.svc-dot{display:inline-block;width:7px;height:7px;border-radius:50%;background:var(--accent);margin-right:4px;}

/* â”€â”€ Detail panel â”€â”€ */
.detail-header{display:flex;gap:20px;margin-bottom:24px;}
.detail-poster{width:120px;height:180px;object-fit:cover;border-radius:12px;flex-shrink:0;background:var(--card);}
.detail-info{flex:1;}
.detail-title{font-size:24px;font-weight:800;margin-bottom:6px;}
.detail-meta{font-size:13px;color:var(--muted);margin-bottom:12px;}
.detail-badges{display:flex;flex-wrap:wrap;gap:8px;margin-bottom:14px;}
.badge{padding:4px 10px;border-radius:20px;font-size:12px;font-weight:600;background:rgba(255,255,255,.08);}
.badge.svc{background:rgba(229,23,63,.2);color:#ff6b85;}
.badge.status-continuing{background:rgba(34,197,94,.15);color:#22c55e;}
.badge.status-ended{background:rgba(113,113,122,.15);color:#a0a0c0;}

/* â”€â”€ Service selector â”€â”€ */
.svc-select{display:flex;flex-wrap:wrap;gap:6px;margin-bottom:16px;}
.svc-btn{padding:5px 12px;border-radius:20px;border:1px solid var(--border);background:transparent;color:var(--text);font-size:12px;cursor:pointer;transition:all .15s;}
.svc-btn:hover{border-color:var(--accent);color:var(--accent);}
.svc-btn.active{background:var(--accent);border-color:var(--accent);color:#fff;}

/* â”€â”€ Season tabs â”€â”€ */
.stabs-outer{position:relative;display:flex;align-items:center;margin-bottom:16px;}
.stabs-arr{background:rgba(255,255,255,.08);border:none;color:var(--text);width:28px;height:28px;border-radius:50%;cursor:pointer;font-size:16px;flex-shrink:0;transition:background .15s;}
.stabs-arr:hover{background:rgba(255,255,255,.15);}
.stabs-wrap{flex:1;overflow:hidden;position:relative;}
.stabs{display:flex;gap:6px;overflow-x:auto;scroll-behavior:smooth;-ms-overflow-style:none;scrollbar-width:none;padding:2px 4px;}
.stabs::-webkit-scrollbar{display:none;}
.stab{padding:6px 14px;border-radius:20px;border:1px solid var(--border);background:transparent;color:var(--muted);font-size:13px;cursor:pointer;white-space:nowrap;transition:all .15s;}
.stab:hover{border-color:var(--accent);color:var(--text);}
.stab.active{background:var(--accent);border-color:var(--accent);color:#fff;font-weight:600;}

/* â”€â”€ Episode list â”€â”€ */
.ep-grid{display:flex;flex-direction:column;gap:8px;}
.ep-row{display:flex;align-items:center;gap:12px;padding:12px 14px;background:var(--card);border-radius:10px;border:1px solid var(--border);transition:border-color .15s;}
.ep-row:hover{border-color:rgba(229,23,63,.3);}
.ep-row.watched{opacity:.5;}
.ep-num{font-size:12px;color:var(--muted);min-width:44px;font-weight:600;}
.ep-title{flex:1;font-size:14px;}
.ep-air{font-size:11px;color:var(--muted);min-width:80px;text-align:right;}
.ep-actions{display:flex;gap:6px;}
.ep-btn{padding:5px 10px;border-radius:8px;border:none;font-size:12px;cursor:pointer;font-weight:600;transition:all .15s;}
.ep-watch{background:rgba(229,23,63,.15);color:var(--accent);}
.ep-watch:hover{background:var(--accent);color:#fff;}
.ep-tick{background:rgba(34,197,94,.15);color:var(--success);}
.ep-tick:hover{background:rgba(34,197,94,.3);}
.ep-tick.on{background:var(--success);color:#fff;}

/* â”€â”€ Topbar controls â”€â”€ */
.tb-btn{background:rgba(255,255,255,.08);border:none;color:var(--text);padding:7px 14px;border-radius:10px;cursor:pointer;font-size:13px;font-weight:600;transition:all .15s;}
.tb-btn:hover{background:rgba(255,255,255,.15);}
.tb-btn.danger{background:rgba(229,23,63,.2);color:var(--accent);}
.scan-btn{background:linear-gradient(135deg,var(--accent2),var(--accent));border:none;color:#fff;padding:7px 16px;border-radius:10px;cursor:pointer;font-size:13px;font-weight:700;}

/* â”€â”€ Empty state â”€â”€ */
.empty{text-align:center;padding:60px 20px;color:var(--muted);}
.empty-icon{font-size:48px;margin-bottom:12px;}

/* â”€â”€ Toast â”€â”€ */
#toast{position:fixed;bottom:24px;left:50%;transform:translateX(-50%) translateY(80px);background:#1e1e3a;border:1px solid var(--border);border-radius:12px;padding:10px 20px;font-size:14px;transition:transform .3s ease;z-index:9999;pointer-events:none;white-space:nowrap;}
#toast.show{transform:translateX(-50%) translateY(0);}

/* â”€â”€ Profile overlay â”€â”€ */
.prof-overlay{position:fixed;inset:0;background:rgba(0,0,0,.75);z-index:9999;display:flex;align-items:center;justify-content:center;}
.prof-box{background:var(--surface);border:1px solid var(--border);border-radius:20px;padding:32px;min-width:340px;text-align:center;}
.prof-title{font-size:12px;color:var(--muted);text-transform:uppercase;letter-spacing:.08em;margin-bottom:4px;}
.prof-app{font-size:22px;font-weight:800;margin-bottom:22px;}
.prof-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(120px,1fr));gap:10px;margin-bottom:18px;}
.prof-btn{background:rgba(255,255,255,.07);border:1px solid rgba(255,255,255,.12);border-radius:14px;padding:16px 10px;cursor:pointer;color:var(--text);font-size:15px;font-weight:700;transition:all .15s;}
.prof-btn:hover{background:rgba(229,23,63,.25);border-color:var(--accent);transform:scale(1.04);}
.prof-cancel{background:none;border:none;color:var(--muted);font-size:13px;cursor:pointer;padding:4px 8px;margin-top:4px;}
.prof-cancel:hover{color:var(--text);}

/* â”€â”€ Loading â”€â”€ */
.spinner{display:inline-block;width:20px;height:20px;border:2px solid rgba(255,255,255,.15);border-top-color:var(--accent);border-radius:50%;animation:spin .7s linear infinite;}
@keyframes spin{to{transform:rotate(360deg);}}
@keyframes fadeIn{from{opacity:0;transform:scale(.97);}to{opacity:1;transform:scale(1);}}
.fade-in{animation:fadeIn .2s ease;}

/* â”€â”€ Responsive â”€â”€ */
@media(max-width:600px){
  .sidebar{width:100%;height:200px;border-right:none;border-bottom:1px solid var(--border);}
  .content{flex-direction:column;}
  .detail-header{flex-direction:column;}
  .detail-poster{width:80px;height:120px;}
}
</style>
</head>
<body>
<div id="app">
  <div class="topbar">
    <h1>ğŸ“º TV Guide</h1>
    <button class="scan-btn" id="scanAllBtn" onclick="scanAll()">ğŸ” Scan Services</button>
    <button class="tb-btn" id="refreshBtn" onclick="loadShows()">â†» Refresh</button>
  </div>
  <div class="content">
    <div class="sidebar">
      <div class="search-wrap">
        <input type="text" id="searchInput" placeholder="Search showsâ€¦" oninput="filterShows()">
      </div>
      <div id="showList"><div class="empty"><div class="spinner"></div></div></div>
    </div>
    <div class="main" id="mainPanel">
      <div class="empty fade-in">
        <div class="empty-icon">ğŸ¬</div>
        <div>Select a show from the list</div>
      </div>
    </div>
  </div>
</div>
<div id="toast"></div>

<script>
// â”€â”€ State â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
let shows=[], episodes=[], currentShow=null, currentSeason=1;
let appData={watched:{},services:{},deep_links:{},progress:{}};
let status={profiles:{},services:{}};
let _profCb=null;

const SVCS_LABELS={
  netflix:"Netflix",hulu:"Hulu",disney:"Disney+",max:"Max",
  peacock:"Peacock",discovery:"Discovery+",tubi:"Tubi",pluto:"Pluto TV",
  youtube:"YouTube",prime:"Prime Video",plex:"Plex",paramount:"Paramount+",
  apple:"Apple TV+",amc:"AMC+",shudder:"Shudder",crunchyroll:"Crunchyroll",starz:"Starz"
};

// â”€â”€ Init â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
async function init(){
  try{
    status = await api('/api/status');
    appData = await api('/api/data');
    await loadShows();
  }catch(e){toast('Failed to connect to backend: '+e.message,'error');}
}

// â”€â”€ API â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
async function api(path,opts={}){
  const r=await fetch(path,opts);
  if(!r.ok) throw new Error(`${r.status} ${r.statusText}`);
  return r.json();
}
async function post(path,body){
  return api(path,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(body)});
}
async function del(path){
  return api(path,{method:'DELETE'});
}

// â”€â”€ Shows â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
async function loadShows(){
  document.getElementById('refreshBtn').innerHTML='<span class="spinner"></span>';
  try{
    shows = await api('/api/shows');
    renderShowList();
  }catch(e){toast('Sonarr error: '+e.message,'error');}
  document.getElementById('refreshBtn').textContent='â†» Refresh';
}

function filterShows(){
  const q=document.getElementById('searchInput').value.toLowerCase();
  renderShowList(q);
}

function renderShowList(q=''){
  const filtered=shows.filter(s=>s.title.toLowerCase().includes(q));
  const html=filtered.map(s=>{
    const svc=appData.services[String(s.id)];
    const svcLabel=svc?SVCS_LABELS[svc]:'';
    return `<div class="show-item${currentShow?.id===s.id?' active':''}" onclick="selectShow(${s.id})">
      <img class="show-poster-sm" src="${s.poster}" onerror="this.src='data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 width=%2236%22 height=%2254%22><rect width=%2236%22 height=%2254%22 fill=%22%231a1a35%22/></svg>'">
      <div class="show-info-sm">
        <div class="show-title-sm">${s.title}</div>
        <div class="show-meta-sm">${svc?`<span class="svc-dot"></span>${svcLabel}`:'No service'} Â· ${s.status||''}</div>
      </div>
    </div>`;
  }).join('');
  document.getElementById('showList').innerHTML=html||'<div class="empty" style="padding:40px 20px">No shows found</div>';
}

async function selectShow(id){
  currentShow=shows.find(s=>s.id===id);
  if(!currentShow)return;
  currentSeason=1;
  renderShowList(document.getElementById('searchInput').value.toLowerCase());
  renderDetail();
  try{
    episodes=await api(`/api/shows/${id}/episodes`);
    renderDetail();
  }catch(e){toast('Could not load episodes','error');}
}

// â”€â”€ Detail â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function renderDetail(){
  if(!currentShow){return;}
  const s=currentShow;
  const sid=String(s.id);
  const svc=appData.services[sid];
  const seasons=[...new Set(episodes.filter(e=>e.seasonNumber>0).map(e=>e.seasonNumber))].sort((a,b)=>a-b);
  if(!seasons.includes(currentSeason)&&seasons.length)currentSeason=seasons[0];

  const svcBtns=Object.entries(SVCS_LABELS).map(([k,v])=>
    `<button class="svc-btn${svc===k?' active':''}" onclick="setService('${sid}','${k}')">${v}</button>`
  ).join('');

  const stabsHtml=seasons.map(n=>
    `<button class="stab${n===currentSeason?' active':''}" onclick="setSeason(${n})">S${n}</button>`
  ).join('');

  const seasEps=episodes.filter(e=>e.seasonNumber===currentSeason);
  const watchedIds=appData.watched[sid]||[];

  const epsHtml=seasEps.map(e=>{
    const isWatched=watchedIds.includes(e.id);
    const airDate=e.airDate?new Date(e.airDate).toLocaleDateString('en-US',{month:'short',day:'numeric',year:'numeric'}):'';
    return `<div class="ep-row${isWatched?' watched':''}" id="ep-${e.id}">
      <div class="ep-num">E${String(e.episodeNumber).padStart(2,'0')}</div>
      <div class="ep-title">${e.title||'TBA'}</div>
      <div class="ep-air">${airDate}</div>
      <div class="ep-actions">
        ${svc?`<button class="ep-btn ep-watch" onclick="launchEpisode('${sid}','${svc}',${JSON.stringify(e).replace(/"/g,'&quot;')})">ğŸ”¥ Watch</button>`:''}
        <button class="ep-btn ep-tick${isWatched?' on':''}" onclick="toggleWatched('${sid}',${e.id},${isWatched})">${isWatched?'âœ“':'â—‹'}</button>
      </div>
    </div>`;
  }).join('');

  const progress=watchedIds.filter(eid=>episodes.find(e=>e.id===eid)).length;
  const total=episodes.filter(e=>e.seasonNumber>0).length;

  document.getElementById('mainPanel').innerHTML=`
    <div class="fade-in">
      <div class="detail-header">
        <img class="detail-poster" src="${s.poster}" onerror="this.style.background='var(--card)'">
        <div class="detail-info">
          <div class="detail-title">${s.title}</div>
          <div class="detail-meta">${s.year||''} Â· ${s.network||''} Â· ${progress}/${total} watched</div>
          <div class="detail-badges">
            <span class="badge status-${s.status}">${s.status||''}</span>
            ${svc?`<span class="badge svc">${SVCS_LABELS[svc]}</span>`:''}
          </div>
          <div style="font-size:12px;color:var(--muted);margin-bottom:8px">Streaming service:</div>
          <div class="svc-select">${svcBtns}</div>
        </div>
      </div>

      <div class="stabs-outer">
        <button class="stabs-arr" id="stabL" onclick="scrollStabs(-1)">â€¹</button>
        <div class="stabs-wrap"><div class="stabs" id="stabs">${stabsHtml}</div></div>
        <button class="stabs-arr" id="stabR" onclick="scrollStabs(1)">â€º</button>
      </div>

      <div class="ep-grid">${epsHtml||'<div class="empty">No episodes found</div>'}</div>
    </div>`;
  initStabsScroll();
}

function setSeason(n){currentSeason=n;renderDetail();}

function scrollStabs(dir){
  const el=document.getElementById('stabs');
  if(el)el.scrollLeft+=dir*120;
}
function initStabsScroll(){
  const el=document.getElementById('stabs');
  const active=el?.querySelector('.stab.active');
  if(active)active.scrollIntoView({behavior:'smooth',inline:'nearest',block:'nearest'});
}

// â”€â”€ Service â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
async function setService(sid,svc){
  const prev=appData.services[sid];
  appData.services[sid]=svc===prev?null:svc;
  if(svc===prev) delete appData.services[sid];
  await post(`/api/shows/${sid}/service`,{service:appData.services[sid]||null});
  renderDetail();
  renderShowList(document.getElementById('searchInput').value.toLowerCase());
}

// â”€â”€ Scan â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
async function scanAll(){
  const btn=document.getElementById('scanAllBtn');
  btn.innerHTML='<span class="spinner"></span> Scanningâ€¦';
  btn.disabled=true;
  try{
    const res=await post('/api/scan-all',{shows});
    appData.services={...appData.services,...res.results};
    renderShowList(document.getElementById('searchInput').value.toLowerCase());
    if(currentShow)renderDetail();
    toast(`âœ“ Found services for ${res.found} of ${res.scanned} shows`);
  }catch(e){toast('Scan failed: '+e.message,'error');}
  btn.textContent='ğŸ” Scan Services';
  btn.disabled=false;
}

// â”€â”€ Watched â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
async function toggleWatched(sid,epId,isWatched){
  if(isWatched){
    appData.watched[sid]=(appData.watched[sid]||[]).filter(e=>e!==epId);
    await del(`/api/shows/${sid}/watched/${epId}`);
  }else{
    if(!appData.watched[sid])appData.watched[sid]=[];
    appData.watched[sid].push(epId);
    await post(`/api/shows/${sid}/watched/${epId}`,{});
  }
  const row=document.getElementById(`ep-${epId}`);
  if(row){
    row.classList.toggle('watched',!isWatched);
    const btn=row.querySelector('.ep-tick');
    if(btn){btn.textContent=isWatched?'â—‹':'âœ“';btn.classList.toggle('on',!isWatched);}
  }
}

// â”€â”€ Fire TV Launch â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
async function launchEpisode(sid,svc,ep){
  const profiles=status.profiles[svc];
  if(profiles&&profiles.length>1){
    showProfilePicker(svc,async(idx)=>{
      await doLaunch(svc,idx);
    });
  }else{
    await doLaunch(svc,0);
  }
}

async function doLaunch(svc,profileIndex){
  toast(`ğŸ”¥ Launching ${SVCS_LABELS[svc]}â€¦`);
  try{
    await post('/api/firetv/launch',{service:svc,profileIndex});
    toast(`âœ“ Launched ${SVCS_LABELS[svc]}`);
  }catch(e){toast('Launch failed: '+e.message,'error');}
}

// â”€â”€ Profile picker â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function showProfilePicker(svc,onSelect){
  _profCb=onSelect;
  const profiles=status.profiles[svc]||[];
  const appName=SVCS_LABELS[svc]||svc;
  const el=document.createElement('div');
  el.className='prof-overlay';
  el.id='prof-overlay';
  el.innerHTML=`
    <div class="prof-box">
      <div class="prof-title">Who's watching?</div>
      <div class="prof-app">${appName}</div>
      <div class="prof-grid">
        ${profiles.map((p,i)=>`<button class="prof-btn" onclick="pickProfile(${i})">${p}</button>`).join('')}
      </div>
      <button class="prof-cancel" onclick="document.getElementById('prof-overlay').remove();_profCb=null;">Cancel</button>
    </div>`;
  document.body.appendChild(el);
}
function pickProfile(i){
  const el=document.getElementById('prof-overlay');
  if(el)el.remove();
  if(_profCb){const cb=_profCb;_profCb=null;cb(i);}
}

// â”€â”€ Toast â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
let _toastTimer;
function toast(msg,type='info'){
  const el=document.getElementById('toast');
  el.textContent=msg;
  el.style.borderColor=type==='error'?'rgba(229,23,63,.4)':type==='success'?'rgba(34,197,94,.4)':'var(--border)';
  el.classList.add('show');
  clearTimeout(_toastTimer);
  _toastTimer=setTimeout(()=>el.classList.remove('show'),3000);
}

init();
</script>
</body>
</html>
